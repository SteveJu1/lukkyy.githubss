---
layout:     post
title:      "计算机网络体系结构 "
date:       2017-05-04 
categories: Web
tags: Web 网络五层协议
---

#### ISP 

ISP 互联网服务提供商，有通讯的线路、设备，负责为用户提供接入网络的服务，向用户收费，比如中国电信，移动等。ISP之间的传输速度较慢，有些网站下载的时候提供不同ISP的下载服务（电信下载，移动下载）







##### 电路交换与分组交换

电路交换：比如电话通讯，两个用户之间会建立专用的网络通道，在通讯结束之前会一直占用线路。线路利用率往往不到 10%

##### 分组交换

分组交换是将传输的内容分成一个个包裹，每个分组都有头部尾部记录着原地址、目标地址等信息。在一条线路上可以传输多个分组，分组之间不会相互影响，线路利用率要高很多。



#### 时延

**总时延= 传输时延 + 传播时延+处理时延+排队时延**

传输时延：是主机或路由器把数据发送出去的时间， ( 数据帧的长度bit/传输速率)

传输时延：电磁波在信道中跑的时间，（信道的长度/传播速度）

​                   note:电磁波在同轴电缆中的速度比在光纤要快

处理时延：主机或路由器收到分组数据包后还要处理嘛，例如分析首部、从分组中提取数据、差错检验或查找路由表等

排队时延：分组在路由器的输入、输出队列中排队等待的时间，取决于网络当前的通信量（负载量）

​           

### 计算机网络的体系结构

![](https://lukkyy.github.io/assets/IT/Web/webProc.png)

#### 五层协议

五层协议是实际在使用的网络协议

**应用层** ：为特定应用程序传输数据服务，比如HTTP、POP、DNS，可以自己定义协议

**传输层：**为主机之间的进程通讯提供服务，包括两种协议：**传输控制协议TCP**，面向连接，可靠的数据传输；**用户数据包协议UDP**，无连接，尽最大努力传输数据，数据单位是用户数据包；TCP数据传输可靠，由于要验证传输的数据是否完整，实时性差。UDP提供及时性的服务，但数据可能会丢失；这层负责流量控制，可靠传输

​    note：微信发消息用TCP协议，保证消息能收到，视频聊天用的UDP，实时性好，但是数据丢失后视频会卡帧。

**网络层：**为主机之间数据传输提供服务，将传输层的数据分装成**分组**，规划**IP地址**在这一层加上

**数据链路层：**把网络层的数据装成**帧**，在帧加上**Mac地址**，透明传输、差错校验

**物理层：**负责将数据转成比特流，规定传输媒体的标准，网线、电压标准等

**表示层** ：数据压缩、加密以及数据描述，负责主机之间数据内部格式不同的问题。

**会话层** ：建立及管理会话。netstat看会话状态时在这层

#### TCP/IP

TCP/IP是一组协议，把数据链路层和物理层合并为网络接口层

##### 数据在各层之间的传递过程

向下传递的过程加上首部和尾部，向上传递拆开首部和尾部



![](https://lukkyy.github.io/assets/IT/Web/wuchengxieyi.PNG)

Note：路由器使用的协议只有最下面三层

Note：宽带的单位是比特b，不是字节B，转换成下载速度时要除8，所用10M的宽带下载速度在 1 MB/s左右 （需要负载等因素的影响，传输速度达不到理论上限）